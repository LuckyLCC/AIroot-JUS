<!-- 省份选择 -->
<css>
	body{
		box-sizing:border-box;
		position:fixed;
		flex-direction:column;
		display:flex;
		background-color:rgba(0,0,0,0.2);
		justify-content:center;
		align-items:center;
		left:0px;
		top:0px;
		width:100%;
		height:100%;
	}
	.title{
		display:flex;
		position:relative;
		flex-shrink: 0;
		align-items:center;
		justify-content:center;
		font-size:14px;
		height:36px;
		background-color:#f5f5f5;
		text-align:center;
	}
	.header{
		display:flex;
		flex-shrink: 0;
		align-items:center;
		height:36px;
		background-color:#ffffff;
		text-align:center;
		border-bottom:1px solid #dddddd;
		padding-left:10px;
		box-sizing:border-box;
	}
	.header .label{
		font-size:14px;
		margin: 0px 10px 0px 0px;
		padding: 7px 0px 7px 0px;
		border-bottom:1px solid #ffffff;
		display:none;
		white-space: nowrap;
		overflow:hidden;
		text-overflow:ellipsis;
	}
	
	.header .label>span{
		color:#3E65F1;
	}
	
	.header .label.selected{
		border-bottom:2pt solid #3E65F1;
	}
	.panel{
		display:flex;
		flex-direction:column;
		overflow:hidden;
		background-color:#ffffff;
		padding:10px;
		height:100%;

	}
	.option{
		font-size: 14px;
		line-height: 26px;
		color:#444444;
	}
	
	.option.selected{
		color:#3E65F1;
		background:url(img/icon/sel.png) no-repeat;
		background-position:100% center;
		background-size: 8px;
		padding-right: 15px;
	}
	
	.pro{
		overflow: hidden;
		overflow-y: auto;
		display: flex;
		flex-direction: column;
		align-items: flex-start;
	}
</css>
<div>
	<div id="closeBtn" style="width:100%;height:100%;"></div>
	<div id="panel" style="display:flex;flex-direction:column;width:100%;height:100%;justify-content:flex-end">
		<div class="title">
			<div>请选择</div>
		</div>
		<div id="header" class="header">
			<div id="p0" class="label selected"><span>请选择</span></div>
		</div>
		<div class="panel">
			<div id="pro" class="pro"></div>
		</div>
	</div>
	
</div>
<script>
	private var current = 0;
	var _self = $("#$panel");
	var info = null;
	function init(obj,attr,name,value,src){
		this.info = info;
		#closeBtn.click(function(){
			$(dom).remove();
		});
		
		$(pro).on("click",".option",function(){
			obj.dataProvider[name] = this.innerText;
			obj.dataProvider[value] = this.getAttribute("value");
			submitEvt();
		});
		loadData(src);
	}
	
	function loadData(src){
		//_self.css("pointer-events","none");
		asjs.load(HOST + "/dict",function(e){
			_self.css("pointer-events","auto");
			var data = e.target.data;
			var xml = new XML(data);
			if(xml.child("mess") == "success"){
				data = xml.child("data");
				var str = "";
				var p = null;
				var txt = "";
				for(var i = 0;i<data.length();i++){
					p = data.at(i);
					if(p.qname("value") == p0.innerText){
						txt = " selected";
					}else{
						txt = "";
					}
					str += "<div class='option" + txt + "' value='" + p.qname("dictinfokey") + "'>" + p.qname("value") + "</div>";
				}
				pro.innerHTML = str;
			}
			
		},{cmd:src});
	}
	
	
	function submitEvt(){
		
		$(dom).remove();
	}
	
</script>