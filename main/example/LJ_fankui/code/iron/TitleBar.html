<!-- TitleBar  -->
<css>
	body{
		display:flex;
		justify-content: space-between;
		align-items:center;
		background-color:#ffffff;
		height:58px;
		padding:0px 5px 0px 5px;
		flex-shrink:0;
		z-index:1;
	}
	.ctrl{
		transition:all .3s ease;
		padding-left:5px;
		color:#00aaff
	}
	.ctrl.back{
		background-position:5px center;
		background-repeat:no-repeat;
		background-image:url(img/icon/back.png);
		background-size:20px 20px;
		padding-left:36px;
		height:36px;
		display:flex;
		align-items:center;
		font-size:16px;
		color:#000000;
	}
	.edit{
		display:flex;
		align-items:center;
		background-position:center center;
		background-repeat:no-repeat;
		
		background-size:20px 20px;
		width:36px;
		height:36px;
	}
</css>
<div>
	<div id="txt" class="ctrl back">综合反馈</div>
	<pages.EditButton id="edit" />
</div>
<script>
	public var onBack = null;
	public var onEdit = null;
	public var onSave = null;
	function init(){
		
		edit.onEdit = function(){
			window.Editable = true;
			if(onEdit){
				onEdit();
			}
			title = "取消";
			#txt.removeClass("back");
		}
		
		edit.onSave = function(){
			if(Submit()){
				window.Editable = false;
				if(onSave){
					onSave();
				}
				title = "综合反馈";
				#txt.addClass("back");
				return true;
			}else{
				return false;
			}
			
		}
		
		edit.onCancel = function(){
			window.Editable = false;
			if(onSave){
				onSave();
			}
			title = "综合反馈";
			#txt.addClass("back");
		}
		
		txt.onclick = function(){
			if(txt.innerText.trim() == "取消"){
				edit.cancel();
			}else{
				if(onBack){
					onBack();
				}else if(window.device && window.device.quit){
					window.device.quit();
				}
			}
		}
		
	}
	
	
	/**
	 * 设置title
	 */
	public function set title(value){
		txt.innerText = value;
	}

	
	/**
	 * 获取title
	 */
	public function get title(){
		return txt.innerText;
	}
	
	

	
</script>