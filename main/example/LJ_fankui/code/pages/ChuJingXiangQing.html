<!-- 处警信息 -->
<style>
	body{
		background-color:#f1f1f1;
		display:flex;
		flex-direction:column;
		font-size:14px;
	}
	.line{
		display:flex;
		padding:0px 10px 0px 10px;
		margin:5px 0px 5px 0px;
		align-items:center;
		min-height:36px;
		pointer-events:none;
	}
	
	.container{
		overflow-y:auto;
		overflow-x:hidden;
		height:100%;
	}
	.panel{
		display:flex;
		flex-direction:column;
		margin:10px;
		margin-top:20px;
		margin-bottom:64px;
		overflow:hidden;
		background-color:#ffffff;
		border-radius: 8px;
		box-shadow: 0px 0px 8px rgba(0,0,0,0.05);
		padding: 17px;
		
	}
	.panel .header{
		background:url(img/icon/jh.png) no-repeat;
		border-bottom:1px solid #dddddd;
		height: 48px;
		padding-left: 48px;
		background-position: 12px center;
		background-size: 22px;
		display:flex;
		flex-shrink:0;
		align-items:center;
	}
	
	.line>div:nth-child(1){
		flex-shrink:0;
		white-space:nowrap;
		width:120px;
	}
	.line>div:nth-child(2){
		word-break:break-all;
	}

	.line.edit1{
		background-color:#f0f0f0;
		color:#aa0000;
		pointer-events:auto;
	}
	.line.edit2{
		background-color:#f5f5f5;
		color:#aa0000;
		pointer-events:auto;
	}
	
	.input{
		border:none;
		width:100%;
	}
</style>
<iron.Page>
	<div class="container">
		<div id="panel" class="panel">
			<div class="header">
				<div style="width:100%">警情详情</div>
			</div>
			<div class="content">
				<div class="line">
					<div>事件发生时间:</div>
					<div attr_type="date">{actual_occur_time}</div>
				</div>
				<div class="line">
					<div>当事人证件号:</div>
					<input class="input" type="number" :value="person_id"  maxlength ="18"/>
				</div>
				<div class="line">
					<div>当事人国籍:</div>
					<div class="input" attr_type="select" attr="person_nationality" parent="DIC056">{person_nationality|dict}</div>
				</div>
				<div class="line">
					<div>当事人姓名:</div>
					<input class="input" :value="person_name" />
				</div>
				
				<div class="line">
					<div>*事件类别:</div>
					<div class="input" attr_type="select" attr="alarm_first_type" parent="DIC008">{alarm_first_type|dict}</div>
				</div>
				<div class="line">
					<div>事件类型:</div>
					<div class="input" attr_type="select" attr="alarm_second_type" :+parent="alarm_first_type">{alarm_second_type|dict}</div>
				</div>
				<div class="line">
					<div>事件细类:</div>
					<div class="input" attr_type="select" attr="alarm_third_type" :+parent="alarm_second_type">{alarm_third_type|dict}</div>
				</div>
				
				<!-- 下一组 -->
				<div class="line">
					<div>事发地址类别:</div>
					<div class="input" attr_type="select" attr="alarm_addr_first_type" parent="DIC045">{alarm_addr_first_type|dict}</div>
				</div>
				<div class="line">
					<div>事发地址类型:</div>
					<div class="input" attr_type="select" attr="alarm_addr_second_type" :+parent="alarm_addr_first_type">{alarm_addr_second_type|dict}</div>
				</div>
				<div class="line">
					<div>事发地址详情:</div>
					<textarea class="input" :value="actual_occur_addr"  maxlength ="200"></textarea>
				</div>
				<div class="line">
					<div>事发单位名称:</div>
					<input class="input" type="text" :value="alarm_addr_dept_name"  maxlength ="100"/>
				</div>
				<!-- 下一组 -->
				<div class="line">
					<div>事发部位类型:</div>
					<div class="input" attr_type="select" attr="alarm_region_type" parent="DIC046">{alarm_region_type|dict}</div>
				</div>
				<div class="line">
					<div>事发场所类型:</div>
					<div class="input" attr_type="select" attr="alarm_location_type" parent="DIC047">{alarm_location_type|dict}</div>
				</div>
				<div class="line">
					<div>事发地X坐标:</div>
					<input class="input" type="text" :value="alarm_longitude" />
				</div>
				<div class="line">
					<div>事发地Y坐标:</div>
					<input class="input" type="text" :value="alarm_latitude" />
				</div>
				<div class="line">
					<div>燃烧建筑类别:</div>
					<div class="input" attr_type="select" attr="fire_building_first_type" parent="DIC048">{fire_building_first_type|dict}</div>
				</div>
				<div class="line">
					<div>火场扑灭时间:</div>
					<div class="input" attr_type="date" attr="fire_put_out_time">{fire_put_out_time}</div>
				</div>
				<div class="line">
					<div>起火源:</div>
					<div class="input" attr_type="select" attr="fire_source_type" parent="DIC051">{fire_source_type|dict}</div>
				</div>
				<div class="line">
					<div>起火场所类型:</div>
					<div class="input" attr_type="select" attr="fire_building_second_type" parent="DIC049">{fire_building_second_type|dict}</div>
				</div>
				<div class="line">
					<div>起火场所细类:</div>
					<div class="input" attr_type="select" attr="fire_building_third_type" :+parent="fire_building_second_type">{fire_building_third_type|dict}</div>
				</div>
				
				<!-- 下一组 -->
				<div class="line">
					<div>火灾原因类别:</div>
					<div class="input" attr_type="select" attr="fire_cause_first_type" parent="DIC050">{fire_cause_first_type|dict}</div>
				</div>
				<div class="line">
					<div>火灾原因类型:</div>
					<div class="input" attr_type="select" attr="fire_cause_second_type" :+parent="fire_cause_first_type">{fire_cause_second_type|dict}</div>
				</div>
				<div class="line">
					<div>火灾原因细类:</div>
					<div class="input" attr_type="select" attr="fire_cause_third_type" :+parent="fire_cause_first_type">{fire_cause_third_type|dict}</div>
				</div>
				
				
				<div class="line">
					<div>过火面积:</div>
					<input class="input" type="text" :value="fire_area" />
				</div>
				<div class="line">
					<div>道路等级:</div>
					<div class="input" attr_type="select" attr="traffic_road_level" parent="DIC057">{traffic_road_level|dict}</div>
				</div>
				<div class="line">
					<div>事故级别:</div>
					<div class="input" attr_type="select" attr="traffic_accident_level" parent="DIC058">{traffic_accident_level|dict}</div>
				</div>
				<div class="line">
					<div>事故车辆类型:</div>
					<div class="input" attr_type="select" attr="traffic_vehicle_type" parent="DIC052">{traffic_vehicle_type|dict}</div>
				</div>
				<div class="line">
					<div>事故车辆车牌:</div>
					<input class="input" type="text" :value="traffic_vehicle_no" />
				</div>
				<div class="line">
					<div>查处治安警情:</div>
					<select class="input" :value="is_solve_public_security">
						<option value="1">是</option>
						<option value="0">否</option>
					</select>
				</div>
				<div class="line">
					<div>*抓获人数:</div>
					<input class="input" type="text" :value="people_num_capture"  maxlength ="2" />
				</div>
				<div class="line">
					<div>破获刑事警情:</div>
					<select class="input" :value="is_solve_crown">
						<option value="1">是</option>
						<option value="0">否</option>
					</select>
				</div>
				<div class="line">
					<div>*求助人数:</div>
					<input class="input" type="number" :value="people_num_rescue"  maxlength ="4"/>
				</div>
				<div class="line">
					<div>*出动警力:</div>
					<input class="input" type="number" :value="police_num_dispatch"  maxlength ="3"/>
				</div>
				<div class="line">
					<div>*轻伤人数:</div>
					<input class="input" type="number" :value="people_num_slight_injury"  maxlength ="3"/>
				</div>
				<div class="line">
					<div>*出动车辆数:</div>
					<input class="input" type="number" :value="police_car_num_dispatch"  maxlength ="2"/>
				</div>
				<div class="line">
					<div>*重伤人数:</div>
					<input class="input" type="number" :value="people_num_serious_injury"  maxlength ="3"/>
				</div>
				<div class="line">
					<div>经济损失:</div>
					<input class="input" type="number" :value="economy_loss" />
				</div>
				<div class="line">
					<div>*死亡人数:</div>
					<input class="input" type="number" :value="people_num_death"  maxlength ="3"/>
				</div>
				<div class="line">
					<div>挽回经济损失:</div>
					<input class="input" type="number" :value="retrieve_economy_loss" />
				</div>
			</div>
		</div>
	</div>
</iron.Page>
<script>
	import util.Template;
	var _self = $(dom);
	function init(){
		m = new Template(panel);
		m.filter.dict = function(v){
			return DICT[v];
		};
		/*
		m.filter.end = function(v){
			return v + "-->";
		};
		
		m.watch("alarm_first_type",function(name,a,b){
			sjlx.setAttribute("parent",a);
		});
		*/
		m.dataContext = icc;
		
		_self.find(".line").click(function(){
			if(!window.Editable){
				return;
			}
			var $this = $(this);
			var t = $this.find(".input");
			if(t.length>0){
				var elem = t.eq(0);
				if(elem.attr("attr_type") == "date"){
					JUS.addModule(document.body,"iron.TM",[m,elem.attr("attr")]);
				}else if(elem.attr("attr_type") == "select"){
					JUS.addModule(document.body,"iron.MulSelect",[HOST + "dict?cmd=dict_lj",{parentKey:elem.attr("parent")}],function(e){
						e.level = 0;
						e.onFinish = function(e){
							var data = e.target.data;
							console.log(data);
							if(icc && data.length >0){
								m.dataContext[elem.attr("attr")] = data[0].dataField;
								//icc.result_type = data[0].dataField;
							}
						};
					});
				}
				
			}
			
		});
		editabled = window.Editable;
	}
	
	set editabled(value){
		if(value){
			_self.find(".input").each(function(a){
				var $this = $(this);
				if(a % 2 == 0){
					$this.parent().addClass("edit1");
				}else{
					$this.parent().addClass("edit2");
				}
			});
		}else{
			_self.find(".input").each(function(){
				var $this = $(this);
				$this.parent().removeClass("edit1");
				$this.parent().removeClass("edit2");
			});
		}
	}
</script>