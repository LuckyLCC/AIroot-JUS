<!-- 反馈信息 -->
<style>
	body{
		background-color:#f1f1f1;
		display:flex;
		flex-direction:column;
		font-size:14px;
	}
	.line{
		display:flex;
		padding:0px 10px 0px 10px;
		margin:5px 0px 5px 0px;
		align-items:center;
		min-height:48px;
		pointer-events:none;
	}
	
	.container{
		overflow-y:auto;
		overflow-x:hidden;
	}
	.panel{
		display:flex;
		flex-direction:column;
		margin:10px;
		margin-top:20px;
		margin-bottom:64px;
		overflow:hidden;
		background-color:#ffffff;
		border-radius: 8px;
		box-shadow: 0px 0px 8px rgba(0,0,0,0.05);
		padding: 17px;
		
	}
	.panel .header{
		background:url(img/icon/jh.png) no-repeat;
		border-bottom:1px solid #dddddd;
		height: 48px;
		padding-left: 48px;
		background-position: 12px center;
		background-size: 22px;
		display:flex;
		flex-shrink:0;
		align-items:center;
	}
	.line>div:nth-child(1){
		flex-shrink:0;
		white-space:nowrap;
		width:120px;
	}
	.line>div:nth-child(2){
		word-break:break-all;
	}
	.line.edit1{
		background-color:#f0f0f0;
		color:#aa0000;
		pointer-events:auto;
	}
	.line.edit2{
		background-color:#f5f5f5;
		color:#aa0000;
		pointer-events:auto;
	}
	.input{
		border:none;
		width:100%;
	}
	
	
</style>
<iron.Page>
	<div class="container">
		<div id="panel" class="panel">
			<div class="header">
				<div style="width:100%;">反馈信息</div>
			</div>
			<div class="content">
				<div class="line">
					<div>反馈单编号:</div>
					<div>{id}</div>
				</div>
				<div class="line">
					<div>*反馈单位代码:</div>
					<input class="input" :value="feedback_dept_code" maxlength ="32" />
				</div>
				<div class="line">
					<div>行政区划:</div>
					<div>{feedback_dept_district_code}</div>
				</div>
				<div class="line">
					<div>反馈领导警号:</div>
					<input class="input" type="number" :value="feedback_leader_code" maxlength ="64"/>
				</div>
				<div class="line">
					<div>反馈领导姓名:</div>
					<input class="input" :value="feedback_leader_name" maxlength ="64"/>
				</div>
				
				<div class="line">
					<div>*反馈人警号:</div>
					<input class="input" type="number" :value="feedback_code" maxlength ="64"/>
				</div>
				<div class="line">
					<div>*反馈人姓名:</div>
					<input class="input" :value="feedback_name" maxlength ="30"/>
				</div>
				<div class="line">
					<div>反馈时间:</div>
					<div>{time_edit}</div>
				</div>
				<div class="line">
					<div>接警单编号:</div>
					<div>{alarm_id}</div>
				</div>
				<div class="line">
					<div>*接警人警号:</div>
					<input class="input" type="number" :value="receving_code" />
				</div>
				<div class="line">
					<div>*接警人姓名:</div>
					<input class="input" :value="receving_name" />
				</div>
				<div class="line">
					<div>接警时间:</div>
					<div>{actual_occur_time}</div>
				</div>
				<div class="line">
					<div>处警单编号:</div>
					<div>{process_id}</div>
				</div>
				<div class="line">
					<div>*处警单位代码:</div>
					<input class="input" :value="process_dept_code" maxlength ="32"/>
				</div>
				<div class="line">
					<div>*处警领导警号:</div>
					<input class="input" type="number" :value="process_leader_code" maxlength ="64"/>
				</div>
				<div class="line">
					<div>*处警领导姓名:</div>
					<input class="input" type="text" :value="process_leader_name" maxlength ="30"/>
				</div>
				<div class="line">
					<div>*处警人警号:</div>
					<input class="input" type="number" attr="feedback_name" :value="process_code" maxlength ="40" />
				</div>
				<div class="line">
					<div>*处警人姓名:</div>
					<input class="input" attr="feedback_name" :value="process_name" maxlength ="30"/>
				</div>
				<div class="line">
					<div>实际出警时间:</div>
					<div class="input" attr_type="date" attr="time_police_dispatch">{time_police_dispatch}</div>
				</div>
				<div class="line">
					<div>到达现场时间:</div>
					<div class="input" attr_type="date" attr="time_police_arrived">{time_police_arrived}</div>
				</div>
				<div class="line">
					<div>反馈单状态:</div>
					<div class="input" attr_type="select" attr="state" parent="DIC059">{state|dict}</div>
				</div>
				<div class="line">
					<div>*处理结果:</div>
					<div class="input" attr_type="select" attr="result_type" parent="DIC054">{result_type|dict}</div>
				</div>
				<div class="line">
					<div>*处理结果内容:</div>
					<textarea class="input" style="height:150px" :value="result_content" maxlength ="2000"></textarea>
				</div>
				<div class="line">
					<div>领导指示:</div>
					<textarea class="input" style="height:80px" :value="leader_instruction" maxlength ="2000"></textarea>
				</div>
			</div>
		</div>
		
	</div>
</iron.Page>
<script>
	import util.Template;
	var _self = $(dom);
	function init(){
		var m = new Template(panel);
		m.filter.dict = function(v){
			return DICT[v];
		}
		m.dataContext = icc;
		_self.find(".line").click(function(){
			if(!window.Editable){
				return;
			}
			var $this = $(this);
			var t = $this.find(".input");
			if(t.length>0){
				var elem = t.eq(0);
				if(elem.attr("attr_type") == "date"){
					JUS.addModule(document.body,"iron.TM",[m,elem.attr("attr")]);
				}else if(elem.attr("attr_type") == "select"){
					JUS.addModule(document.body,"iron.MulSelect",[HOST + "dict?cmd=dict_lj",{parentKey:elem.attr("parent")}],function(e){
						e.level = 0;
						e.onFinish = function(e){
							var data = e.target.data;
							console.log(data);
							if(icc && data.length >0){
								m.dataContext[elem.attr("attr")] = data[0].dataField;
							}
						};
					});
				}
				
			}
			
		});
		editabled = window.Editable;

	}
	
	set editabled(value){
		if(value){
			_self.find(".input").each(function(a){
				var $this = $(this);
				if(a % 2 == 0){
					$this.parent().addClass("edit1");
				}else{
					$this.parent().addClass("edit2");
				}
			});
		}else{
			_self.find(".input").each(function(){
				var $this = $(this);
				$this.parent().removeClass("edit1");
				$this.parent().removeClass("edit2");
			});
		}
	}

	
</script>