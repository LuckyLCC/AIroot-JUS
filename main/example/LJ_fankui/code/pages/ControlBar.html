<style>
	body{
		border-top: 1px solid #fafafa;
		//transition:height .3s;
		display:flex;
		width:100%;
		position:absolute;
		top:58px;
		flex-shrink:0;
		justify-content:center;
		height:58px;
		box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
		
	}
	.button{
		display:flex;
		align-items:flex-end;
		justify-content:center;
		color:#888888;
		background-color:#ffffff;
		background-repeat:no-repeat;
		background-position:center 8px;
		background-size:22px;
		padding:8px;
		width:100%;
	}
	
	.button div{
		font-size:12px;
	}
	.fkxx{
		background-image:url(img/icon/feedback_msg.png);
	}
	.cjxx{
		background-image:url(img/icon/feedback_deal_msg.png);
	}
	.clzt{
		background-image:url(img/icon/feedback_status.png);
	}
	.sjzj{
		background-image:url(img/icon/feedback_summary.png);
	}
	
	
	#ub{
		position:absolute;
		transition:left .3s ease;
		bottom:0px;
		width:50%;
		height:3px;
		background-color:#00aaff;
		left:0px;
	}
	.hi{
		background-image:none;
	}
</style>
<div>
	<div class="button fkxx">
		<div>反馈详情</div>
	</div>
	<div class="button cjxx">
		<div>警情详情</div>
	</div>
	<!--
	<div class="button fkxx">
		<div>反馈信息</div>
	</div>
	<div class="button cjxx">
		<div>处警信息</div>
	</div>
	<div class="button clzt">
		<div>处理状态</div>
	</div>
	<div class="button sjzj">
		<div>事件总结</div>
	</div>
	-->
	<div id="ub"></div>
</div>
<script>
	public var onChange = null;
	var _self = $(dom);
	var _name = null;
	var target = null;
	var current = null;
	var cp = true;
	var pName = "";
	function init(target){
		this.target = target;
		_self.on("click",".button",function(){
			if(!cp){//如果没有加载完毕
				return;
			}
			var $this = $(this);
			$("#$ub").css("left",$this.offset().left);
			_name = $this.text().trim();
			cp = false;
			render(_name);
			if(onChange){
				onChange({target:@this});
			}
		});
	}
	
	public function setTarget(value){
		this.target = value;
	}
	
	public function get name(){
		return _name;
	}
	
	
	function render(name){
		if(pName == name){
			cp = true;
			return;
		}
		pName = name;
		switch(name){
			case "反馈信息" :
				JUS.addModule(target,"pages.Fankui",[],lis);
			break;
			case "处警信息" :
				JUS.addModule(target,"pages.ChuJing",[],lis);
			break;
			case "处理状态" :
				JUS.addModule(target,"pages.ChuLi",[],lis);
			break;
			case "事件总结" :
				JUS.addModule(target,"pages.ShiJian",[],lis);
			break;
			case "反馈详情" :
				JUS.addModule(target,"pages.FanKuiXiangQing",[],lis);
			break;
			case "警情详情" :
				JUS.addModule(target,"pages.ChuJingXiangQing",[],lis);
			break;
		}
	}
	
	public set height(value){
		if(value<26){
			value = 26;
		}
		if(value<50){
			_self.find(">div").addClass("hi");
			_self.css("border","none");
		}else{
			_self.find(">div").removeClass("hi");
			_self.css("border","");
		}
		
		_self.height(value);
	}
	
	function lis(e){
		if(current){
			current.close();
		}
		current = e;
		cp = true;
	}
</script>